if (self.CavalryLogger) { CavalryLogger.start_js(["9uK7K"]); }

__d("InstanceProxy",[],(function a(b,c,d,e,f,g){function h(i){"use strict";this.$InstanceProxy1=i}h.prototype.getInstance=function(){"use strict";return this.$InstanceProxy1};h.prototype.setInstance=function(i){"use strict";this.$InstanceProxy1=i};f.exports=h}),null);
__d("BrowseClientEventLogger",["Banzai","SearchLoggingOptions"],(function a(b,c,d,e,f,g){"use strict";var h="browse_client_event_session",i="search_www_click_error",j="21.",k={logData:function l(event,m,n){var o=arguments.length<=3||arguments[3]===undefined?{}:arguments[3];if(!event||!m)return;o.event=event;o.client_time=Math.floor(Date.now());o.client_time_2=Date.now()/1e3;o.session_id=m;o.vertical=n;this.processedSessions=this.processedSessions||[];if(this.processedSessions.indexOf(m)!==-1)return;var p=o.event==="click"&&o.clicked_href!=null&&c("SearchLoggingOptions").signalLinkClicks;c("Banzai").post(h,[o],{delay:0,retry:true,signal:p})},logClick:function l(m){m.gt.event="click";this.maybeLogVisiblityEvent(m,true)},maybeLogClientViewEvent:function l(m){m.event="client_view";this.maybeLogVisiblityEvent(m)},maybeLogVisiblityEvent:function l(m){var n=arguments.length<=1||arguments[1]===undefined?false:arguments[1],o=null;if(n){o=m;m=m.gt}if(!m||!m.xt||m.xt.indexOf(j)!==0){if(n)c("Banzai").post(i,[o],{delay:0,retry:true});return}var p=JSON.parse(m.xt.substring(3));if(n){p.click_type=m.click_type;p.tn=m.tn;p.clicked_href=m.clicked_href;if(o&&o.bt&&o.bt.ct=="feedback"){p.feedback_score=o.bt.feedback_score;p.feedback_type=o.bt.feedback_type}}var event=m.event;if(p.display_style==="context_hscroll"&&(event==="client_view"||event==="vpvd"||event==="visible"||event==="hidden"))return;if(event==="vpvd"){if(!m.ft)return;p.vpvd_time=m.ft.vpvd_time_delta}this.logData(event,p.session_id,p.vertical,p)},logImpression:function l(m){m.event="impression";this.maybeLogVisiblityEvent(m)}};f.exports=k}),null);
__d("XPubcontentInlinePhotoPivotsEventsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/inline_photo_pivots_chaining/events/",{})}),null);
__d("tidyEvent",["Run"],(function a(b,c,d,e,f,g){var h=[];function i(){while(h.length){var l=h.shift();l&&l.remove?l.remove():l.unsubscribe()}}function j(l){var m;function n(){if(!m)return;m.apply(l,arguments);m=null;l=null}if(l.remove){m=l.remove;l.remove=n}else{m=l.unsubscribe;l.unsubscribe=n}return l}function k(l){if(!h.length)c("Run").onLeave(i);if(Array.isArray(l))for(var m=0;m<l.length;m++)h.push(j(l[m]));else h.push(j(l));return l}f.exports=k}),null);
__d("EntstreamAttachmentRelatedShare",["csx","cx","Arbiter","AsyncRequest","AttachmentRelatedShareConstants","CSS","DOM","Event","XPubcontentInlinePhotoPivotsEventsController","ge","getOrCreateDOMID","tidyEvent"],(function a(b,c,d,e,f,g,h,i){var j=2,k=3,l={loadRelatedAttachment:function m(n,o,p){var q=null;if(typeof n==="string")q=c("ge")(n);else q=n;if(!q)return;var r=c("Event").listen(q,"click",function(){r.remove();c("Arbiter").inform(c("AttachmentRelatedShareConstants").ARTICLE_CLICK,{attachment:q,global_share_id:o,is_right_click:false,share_id:p})}),s=c("Event").listen(q,"mousedown",function(event){if(event.which===k||event.button===j){s.remove();c("Arbiter").inform(c("AttachmentRelatedShareConstants").ARTICLE_CLICK,{attachment:q,global_share_id:o,is_right_click:true})}})},loadInlineStoryPivotAttachment:function m(n,o){var p=c("ge")(n);if(!p)return;var q=c("Event").listen(p,"click",function(){q.remove();c("Arbiter").inform(c("AttachmentRelatedShareConstants").PHOTO_CLICK,{attachment:p,storyid:o})})},loadRelatedGameAttachment:function m(n,o){var p=null;if(typeof n==="string")p=c("ge")(n);else p=n;if(!p)return;c("tidyEvent")(c("Event").listen(p,"click",function(){c("Arbiter").inform(c("AttachmentRelatedShareConstants").GAME_CLICK,{attachment:p,global_share_id:o})}));c("tidyEvent")(c("Event").listen(p,"mousedown",function(event){if(event.which===k||event.button===j)c("Arbiter").inform(c("AttachmentRelatedShareConstants").GAME_CLICK,{attachment:p,global_share_id:o})}))},loadRelatedLSCVideoAttachment:function m(n,o){var p=null;if(typeof n==="string")p=c("ge")(n);else p=n;if(!p)return;var q=c("Event").listen(p,"click",function(){q.remove();c("Arbiter").inform(c("AttachmentRelatedShareConstants").VIDEO_CLICK,{attachment:p,global_share_id:o})})},loadRelatedLSCInlineVideoAttachment:function m(n,o){var p=null;if(typeof n==="string")p=c("ge")(n);else p=n;if(!p)return;c("Event").listen(p,"click",function(){var q="^div._4-u2",r="_1d8v",s=c("DOM").scry(p,q),t=s.length===1?s[0]:null,u=t.parentNode,v=u.previousSibling;while(!v){u=u.parentNode;v=u.previousSibling}if(!c("CSS").hasClass(v,r))var w=c("DOM").create("div",{className:r}),x=c("DOM").insertBefore(t.parentNode,w),y=x.length>=1?x[0]:null;else y=v;var z=c("getOrCreateDOMID")(y);new(c("AsyncRequest"))().setURI("/ajax/flash/expand_inline.php").setData({share_id:o,target_div:z,max_width:470,max_height:264,replace_target_div:true}).setMethod("GET").setReadOnly(true).setRelativeTo(p.parentNode).send()})},loadRelatedEventsPivotAttachment:function m(n,o){var p=null;if(typeof n==="string")p=c("ge")(n);else p=n;if(!p)return;c("tidyEvent")(c("Event").listen(p,"click",function(){c("Arbiter").inform(c("AttachmentRelatedShareConstants").EVENT_JOIN,{attachment:p,event_id:o})}))},loadRelatedProductAttachment:function m(n,o){var p=null;if(typeof n==="string")p=c("ge")(n);else p=n;if(!p)return;c("tidyEvent")(c("Event").listen(p,"click",function(){c("Arbiter").inform(c("AttachmentRelatedShareConstants").PRODUCT_CLICK,{attachment:p,product_id:o})}))},loadMapAttachment:function m(n,o,p){var q=typeof n==="string"?c("ge")(n):n;if(!q)return;var r=typeof o==="string"?c("ge")(o):o;if(!r)return;c("tidyEvent")(c("Event").listen(q,"click",function(){c("Arbiter").inform(c("AttachmentRelatedShareConstants").MAP_CLICK,{attachment:r,story_id:p})}))},loadMapAttachmentActionButton:function m(n,o){var p=typeof n==="string"?c("ge")(n):n;if(!p)return;c("tidyEvent")(c("Event").listen(p,"click",function(){c("Arbiter").inform(c("AttachmentRelatedShareConstants").ACTION_BUTTON_CLICK,{button:p,story_id:o})}))},closeButton:function m(n,o){c("Event").listen(n,"click",function(){c("DOM").remove(o)})},closeButtonPhotoPivots:function m(n,o,p,q){c("Event").listen(n,"click",function(){var r=c("XPubcontentInlinePhotoPivotsEventsController").getURIBuilder(),s={story_id:p,search_query_type:q,event:"hide"};new(c("AsyncRequest"))().setMethod("POST").setURI(r.getURI()).setData(s).send();c("DOM").remove(o)})},seeAllLinkPhotoPivots:function m(n,o,p){c("Event").listen(n,"click",function(){var q=c("XPubcontentInlinePhotoPivotsEventsController").getURIBuilder(),r={story_id:o,search_query_type:p,event:"see_all"};new(c("AsyncRequest"))().setMethod("POST").setURI(q.getURI()).setData(r).send()})},removeOldSuggestions:function m(n){var o=c("ge")(n);if(!o)return;var p=c("DOM").scry(o.parentNode,"._5d73");for(var q=1;q<p.length;q++)c("DOM").remove(p[q]);setTimeout(function(){c("CSS").show(p[0])},1e3)},showHiddenSuggestions:function m(n){var o=c("Event").listen(n,"click",function(){o.remove();var p="^._1ui8",q=c("DOM").scry(n,p);if(!q)return;c("CSS").hide(q[0]);var r=q[0].previousSibling;while(r){c("CSS").show(r);r=r.previousSibling}})}};f.exports=l}),null);
__d("LitestandMessages",[],(function a(b,c,d,e,f,g){var h={NEWSFEED_LOAD:"LitestandMessages/NewsFeedLoad",LEAVE_HOME:"LitestandMessages/LeaveHome",STORIES_REQUESTED:"LitestandMessages/StoriesRequested",STORIES_INSERTED:"LitestandMessages/StoriesInserted",NEWER_STORIES_REQUESTED:"LitestandMessages/NewerStoriesRequested",NEWER_STORIES_INSERTED:"LitestandMessages/NewerStoriesInserted",NEW_STORIES_CONTAINER_CREATED:"LitestandMessages/NewStoriesContainer",RHC_RELOADED:"LitestandMessages/RHCReloaded",STREAM_LOAD_ERROR:"LitestandMessages/StreamLoadError",DUPLICATE_CURSOR_ERROR:"LitestandMessages/DuplicateCursorError",STREAM_LOAD_RETRY:"LitestandMessages/StreamLoadRetry"};f.exports=h}),null);
__d("ViewableImpressionUtils",["csx","cx","CSS"],(function a(b,c,d,e,f,g,h,i){var j={isHorizontallyOffscreen:function k(l,m,n){var o=Math.max(m.x,0),p=Math.min(m.x+m.width,n.width);return p-o<m.width||c("CSS").matchesSelector(l,".desktop_hscroll_offscreen")}};f.exports=j}),null);
__d("VisibilityTrackingHelper",["Arbiter","DesktopHscrollUnitEventConstants","getViewportDimensions","Event"],(function a(b,c,d,e,f,g){var h={getEventListeners:function i(j){return[c("Event").listen(document,"DOMContentLoaded",j),c("Event").listen(window,"scroll",j),c("Event").listen(window,"resize",j),c("Arbiter").subscribe(c("DesktopHscrollUnitEventConstants").HSCROLL_ITEM_SHOWN_EVENT,j)]},getViewportInfo:function i(){return c("getViewportDimensions")()}};f.exports=h}),null);
__d("FullViewLogger",["Banzai","ScriptPath","SubscriptionsHandler","URI"],(function a(b,c,d,e,f,g){h.logFromViewableImpressionTracker=function(i){"use strict";var j=new h();j.subscribeToTrackerEvents(i)};h.prototype.subscribeToTrackerEvents=function(i){"use strict";this.subscriptionsHandler=new(c("SubscriptionsHandler"))();this.subscriptionsHandler.addSubscriptions(i.addListener("full_view",this.onFullView,this))};h.prototype.onFullView=function(i){"use strict";if(this.$FullViewLogger1())this.$FullViewLogger2(i);var j={token:i.token,fullViewType:i.fullViewType,scriptPath:c("ScriptPath").getTopViewEndpoint()};c("Banzai").post("xtrackable:full_view",j);if(this.$FullViewLogger1())this.$FullViewLogger3(j)};h.prototype.$FullViewLogger1=function(){"use strict";return 0};h.prototype.$FullViewLogger2=function(i){"use strict"};h.prototype.$FullViewLogger3=function(i){"use strict"};function h(){"use strict"}f.exports=h}),null);
__d("CommercialBreakMobileEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SUBSCRIPTION_SUCCESS:"commercial_break_skywalker_subscription_success",SUBSCRIPTION_FAILURE:"commercial_break_skywalker_subscription_failure",RECEIVE_INTENT_MSG:"commercial_break_skywalker_receive_intent",RECEIVE_START_MSG:"commercial_break_skywalker_receive_start",RECEIVE_INVALID_MSG:"commercial_break_skywalker_receive_invalid_message",VIDEO_FETCH_SUCCESS:"commercial_break_video_fetch_success",VIDEO_FETCH_FAILURE:"commercial_break_video_fetch_failure",COMMERCIAL_BREAK_INLINE_TO_FULLSCREEN:"commercial_break_inline_to_fullscreen",COMMERCIAL_BREAK_FULLSCREEN_TO_INLINE:"commercial_break_fullscreen_to_inline",COMMERCIAL_BREAK_SCROLLED_AWAY:"commercial_break_scrolled_away",COMMERCIAL_BREAK_SCROLLED_INTO:"commercial_break_scrolled_into",COMMERCIAL_BREAK_START_NFX:"commercial_break_start_nfx",COMMERCIAL_BREAK_HIDE_AD:"commercial_break_hide_ad",COMMERCIAL_BREAK_HIDE_AD_BREAKS:"commercial_break_hide_ad_breaks",COMMERCIAL_BREAK_START:"commercial_break_start",COMMERCIAL_BREAK_START_AD:"commercial_break_start_ad",COMMERCIAL_BREAK_TRANSIT:"commercial_break_transit",COMMERCIAL_BREAK_WAIT_FOR:"commercial_break_wait_for",COMMERCIAL_BREAK_STATIC_COUNTDOWN:"commercial_break_static_countdown",COMMERCIAL_BREAK_END:"commercial_break_end",COMMERCIAL_BREAK_PAUSE_AD:"commercial_break_pause_ad",COMMERCIAL_BREAK_PLAY_AD:"commercial_break_play_ad",COMMERCIAL_BREAK_NO_AD_TRANSITION:"commercial_break_no_ad_transition",COMMERCIAL_BREAK_ELIGIBLE_VOD_START:"commercial_break_eligible_vod_start",COMMERCIAL_BREAK_START_SHOW_NOTHING:"commercial_break_start_show_nothing",COMMERCIAL_BREAK_STARTING_INDICATOR:"commercial_break_starting_indicator",COMMERCIAL_BREAK_START_TIME_DELTA:"commercial_break_start_time_delta",COMMERCIAL_BREAK_IMPRESSION_ATTEMPT:"commercial_break_impression_attempt",COMMERCIAL_BREAK_SKYWALKER_RECEIVED_DUPLICATE_EVENT:"commercial_break_skywalker_received_duplicate_event",COMMERCIAL_BREAK_ADS_LOADED:"commercial_break_ads_loaded",COMMERCIAL_BREAK_FIRE_EVENT_IN_TRACKER:"commercial_break_fire_event_in_tracker",COMMERCIAL_BREAK_LOG_IMPRESSION_IN_TRACKER:"commercial_break_log_impression_in_tracker",COMMERCIAL_BREAK_REGISTER_VIDEO:"commercial_break_register_video",COMMERCIAL_BREAK_RESUME_HOST_VIDEO:"commercial_break_resume_host_video",COMMERCIAL_BREAK_CLICK_ON_STARTING_INDICATOR:"commercial_break_click_on_starting_indicator",COMMERCIAL_BREAK_PLUGIN_IS_ON_DIFFERENT_HOSTVIDEO:"commercial_break_plugin_is_on_different_hostvideo",COMMERCIAL_BREAK_LOG_AD_IMPRESSION:"commercial_break_log_ad_impression",COMMERCIAL_BREAK_CLICK:"commercial_break_click",COMMERCIAL_BREAK_SCRUB_THROUGH:"commercial_break_scrub_through",COMMERCIAL_BREAK_SCRUBBER_LEAVE_BEFORE_AD_BREAK:"commercial_break_scrubber_leave_before_ad_break",COMMERCIAL_BREAK_SCRUBBER_LEAVE_DURING_AD_BREAK:"commercial_break_scrubber_leave_during_ad_break"})}),null);
__d("FullViewType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ENTIRE_UNIT:1})}),null);
__d("PercentVisible",[],(function a(b,c,d,e,f,g){f.exports={NO_VISIBLE:-1,VISIBLE_0_PCT:0,VISIBLE_50_PCT:50,VISIBLE_100_PCT:100}}),null);
__d("VisibilityState",[],(function a(b,c,d,e,f,g){"use strict";f.exports={TOP:"TOP",BOTTOM:"BOTTOM",FULL:"FULL",NULL:"NULL"}}),null);
__d("ViewableImpressionTracker",["csx","AdImpressionLoggingConfig","Banzai","BrowseClientEventLogger","CommercialBreakMobileEvent","DataAttributeUtils","DOM","FullViewType","MarauderLogger","NonBlockingIFrame","PercentVisible","Style","URI","ViewableImpressionUtils","Visibility","VisibilityState","WebSpeedJSExperiments","ge","getElementPosition","getViewportDimensions","mixInEventEmitter"],(function a(b,c,d,e,f,g,h){function i(j,k,l){"use strict";this.id=j;this.element=k;this.config=l;this.iframe=null;this.viewableTimeout=null;this.clearSubsequentTimeout=null;this.waitForSubsequent=false;this.waitForLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.iframeLogged=false;this.banzaiLogged=false;this.topLeftInViewport=false;this.bottomRightInViewport=false}i.prototype.getID=function(){"use strict";return this.id};i.prototype.getConfig=function(){"use strict";return this.config};i.prototype.getPercentInViewport=function(){"use strict";var j=c("getViewportDimensions")(),k=c("getElementPosition")(this.element);return this.$ViewableImpressionTracker1(j,k)};i.prototype.$ViewableImpressionTracker2=function(j,k){var l=arguments.length<=2||arguments[2]===undefined?0:arguments[2];"use strict";if(k.x<j.width&&k.x+k.width>0&&k.y<j.height&&k.y+k.height>l&&c("Style").get(this.element,"visibility")!=="hidden"&&c("Style").get(this.element,"opacity")!=="0"){var m=Math.max(k.x,0),n=Math.min(k.x+k.width,j.width),o=Math.max(k.y,l),p=Math.min(k.y+k.height,j.height);if(k.height*k.width===0)return 100;var q=100*(n-m)*(p-o)/(k.height*k.width);return q}return 0};i.prototype.$ViewableImpressionTracker1=function(j,k){"use strict";if(this.config.require_horizontally_onscreen&&c("ViewableImpressionUtils").isHorizontallyOffscreen(this.element,k,j))return 0;return this.$ViewableImpressionTracker2(j,k)};i.prototype.$ViewableImpressionTracker3=function(j,k,l){"use strict";var m=this.$ViewableImpressionTracker2(j,k,l);if(m===0)return c("PercentVisible").NO_VISIBLE;else if(m<50)return c("PercentVisible").VISIBLE_0_PCT;else if(m<100)return c("PercentVisible").VISIBLE_50_PCT;else return c("PercentVisible").VISIBLE_100_PCT};i.prototype.$ViewableImpressionTracker4=function(j,k){var l=arguments.length<=2||arguments[2]===undefined?0:arguments[2];"use strict";var m=Math.max(k.y,l),n=Math.min(k.y+k.height,j.height),o=100*(n-m)/(j.height-l);if(o<50)return c("PercentVisible").VISIBLE_0_PCT;else if(o<100)return c("PercentVisible").VISIBLE_50_PCT;else return c("PercentVisible").VISIBLE_100_PCT};i.prototype.$ViewableImpressionTracker5=function(j,k){"use strict";var l=0,m=c("ge")("pagelet_bluebar");if(m&&m.offsetHeight)l=m.offsetHeight+m.offsetTop;if(this.config.should_log_viewport_duration){var n=this.$ViewableImpressionTracker4(j,k,l);switch(n){case c("PercentVisible").VISIBLE_0_PCT:case c("PercentVisible").VISIBLE_50_PCT:case c("PercentVisible").VISIBLE_100_PCT:this.emit("viewport_viewability",{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:n});break;default:break}}var o=this.$ViewableImpressionTracker3(j,k,l);switch(o){case c("PercentVisible").VISIBLE_0_PCT:case c("PercentVisible").VISIBLE_50_PCT:case c("PercentVisible").VISIBLE_100_PCT:this.emit("viewability",{tracker:this,id:this.getID(),token:this.getToken(),percentVisible:o});break;default:this.emit("hidden",{id:this.getID(),token:this.getToken()});break}};i.prototype.$ViewableImpressionTracker6=function(j,k){"use strict";if(c("Style").get(this.element,"visibility")==="hidden"||c("Style").get(this.element,"opacity")==="0")return false;var l=k.x,m=k.y,n=k.x+k.width,o=k.y+k.height;this.topLeftInViewport=this.topLeftInViewport||l>=0&&l<=j.width&&m>=0&&m<=j.height;this.bottomRightInViewport=this.bottomRightInViewport||n>=0&&n<=j.width&&o>=0&&o<=j.height;return this.topLeftInViewport&&this.bottomRightInViewport};i.prototype.$ViewableImpressionTracker7=function(j,k){"use strict";if(this.hasEmittedFullViewEvent)return;if(this.$ViewableImpressionTracker6(j,k)){this.emit("full_view",{tracker:this,id:this.getID(),token:this.getToken(),fullViewType:c("FullViewType").ENTIRE_UNIT});this.hasEmittedFullViewEvent=true}};i.prototype.$ViewableImpressionTracker8=function(j,k){"use strict";var l=k.y,m=k.y+k.height,n=l>=0&&l<=j.height,o=m>=0&&m<=j.height,p=void 0;if(n&&o)p=c("VisibilityState").FULL;else if(n)p=c("VisibilityState").TOP;else if(o)p=c("VisibilityState").BOTTOM;else p=c("VisibilityState").NULL;this.emit("viewability_debug",{tracker:this,id:this.getID(),token:this.getToken(),visibleState:p})};i.prototype.onVisible=function(event){"use strict";this.isVisible=true;var j=c("getViewportDimensions")(),k=c("getElementPosition")(this.element),l=this.$ViewableImpressionTracker1(j,k),m=l>this.config.pixel_in_percentage;this.emit("visible",{tracker:this,id:this.getID(),token:this.getToken(),percentInViewport:l});if(this.config.should_log_viewability_duration)this.$ViewableImpressionTracker5(j,k);if(this.config.should_log_debug_duration)this.$ViewableImpressionTracker8(j,k);this.$ViewableImpressionTracker7(j,k);if(!m){this.$ViewableImpressionTracker9();return}if(this.isLogged())this.$ViewableImpressionTracker10();else this.$ViewableImpressionTracker11();if(!this.waitForLogged&&!this.isLogged()&&!(c("AdImpressionLoggingConfig").blockInvisible&&c("Visibility").isHidden())){this.waitForLogged=true;this.viewableTimeout=setTimeout(function(){this.waitForLogged=false;if(c("AdImpressionLoggingConfig").blockInvisible&&c("Visibility").isHidden())return;var l=this.getPercentInViewport(),m=l>this.config.pixel_in_percentage;if(!m){this.$ViewableImpressionTracker12();return}this.logImpression(1,{});this.$ViewableImpressionTracker10()}.bind(this),this.config.duration_in_ms)}};i.prototype.onHidden=function(){"use strict";this.emit("hidden",{id:this.getID(),token:this.getToken()});if(this.config.log_initial_nonviewable&&!this.isLogged()&&!this.isNonViewableLogged)this.logNonViewableImpression();else if(!this.config.log_initial_nonviewable&&!this.isLogged()&&this.isVisible)this.logNonViewableImpression();this.isVisible=false;if(this.waitForLogged){this.waitForLogged=false;clearTimeout(this.viewableTimeout)}if(this.isLogged()&&!this.waitForSubsequent&&this.config.subsequent_gap_in_ms>=0){this.waitForSubsequent=true;this.clearSubsequentTimeout=setTimeout(function(){this.waitForSubsequent=false;this.reset();if(this.isVisible)this.onVisible()}.bind(this),this.config.subsequent_gap_in_ms)}this.$ViewableImpressionTracker12()};i.prototype.onRemoved=function(){"use strict";this.isVisible=false};i.prototype.getToken=function(){"use strict";return c("DataAttributeUtils").getDataAttribute(this.element,"data-xt")};i.prototype.logImpression=function(j,k){"use strict";if(this.isLogged())return;var l=this.getToken(),m=Math.floor(Date.now()/1e3),n=this.$ViewableImpressionTracker13(),o={xt:l,isv:j,cts:m,csp:n};if(c("Banzai").isEnabled("xtrackable_clientview_batch")&&this.config.should_batch||this.config.vital_mode_for_ss||this.config.signal_mode_for_ss){var p=this.config.vital_mode_for_ss?c("Banzai").VITAL:{};p.signal=this.config.signal_mode_for_ss;this.logWithBanzai(o,p)}else this.logWithIFrame(Object.assign(o,k))};i.prototype.logNonViewableImpression=function(){"use strict";if(this.config.nonviewableEnabled){var j=this.getToken();c("Banzai").post("xtrackable:nonviewable",{xt:j})}this.isNonViewableLogged=true};i.prototype.isLogged=function(){"use strict";return this.iframeLogged||this.banzaiLogged};i.prototype.reset=function(){"use strict";if(this.iframeLogged)this.iframeLogged=false;if(this.iframe){c("DOM").remove(this.iframe);this.iframe=null}if(this.banzaiLogged)this.banzaiLogged=false;this.isNonViewableLogged=false;this.isVisible=false;this.waitForLogged=false;this.waitForSubsequent=false};i.prototype.logWithBanzai=function(j,k){"use strict";this.banzaiLogged=true;c("BrowseClientEventLogger").maybeLogClientViewEvent(j);c("Banzai").post("xtrackable:clientview_batch",j,k)};i.prototype.logWithIFrame=function(j){"use strict";this.iframeLogged=true;if(c("WebSpeedJSExperiments").non_blocking_tracker||this.config.is_instream_story)c("NonBlockingIFrame").loadIFrame(new(c("URI"))(this.config.impressionURL).addQueryData(j).toString());else{this.iframe=c("DOM").create("iframe",{src:new(c("URI"))(this.config.impressionURL).addQueryData(j),width:0,height:0,frameborder:0,scrolling:"no",className:"fbEmuTracking"});this.iframe.setAttribute("aria-hidden","true");c("DOM").appendContent(this.element,this.iframe)}};i.prototype.$ViewableImpressionTracker13=function(){"use strict";var j=c("DataAttributeUtils").getDataAttribute(this.element,"data-dedupekey");if(j===null)return null;var k=this.$ViewableImpressionTracker14();if(k===null||k.length===0)return null;var l=k.length;while(--l>=0){var m=c("DataAttributeUtils").getDataAttribute(k[l],"data-dedupekey");if(m!==null&&j===m)break}return l+1};i.prototype.$ViewableImpressionTracker14=function(){"use strict";var j=c("ge")("contentArea");if(j){var k="._5jmm",l=c("DOM").scry(j,k);return l.filter(function(n){return c("DataAttributeUtils").getDataAttribute(n,"data-dedupekey")})}else{var m=c("ge")("m_newsfeed_stream");return m===null?null:m.getElementsByTagName("article")}};i.prototype.$ViewableImpressionTracker15=function(){"use strict";return 0};i.prototype.$ViewableImpressionTracker9=function(){"use strict";if(this.$ViewableImpressionTracker15()){c("Style").set(this.element,"background-color","#abab9a");c("Style").set(this.element,"outline","3px solid #abab9a")}};i.prototype.$ViewableImpressionTracker11=function(){"use strict";if(this.$ViewableImpressionTracker15()){c("Style").set(this.element,"background-color","#e4f70a");c("Style").set(this.element,"outline","3px solid #e4f70a")}};i.prototype.$ViewableImpressionTracker12=function(){"use strict";if(this.$ViewableImpressionTracker15()){c("Style").set(this.element,"background-color",null);c("Style").set(this.element,"outline",null)}};i.prototype.$ViewableImpressionTracker10=function(){"use strict";if(this.$ViewableImpressionTracker15()){c("Style").set(this.element,"background-color","#047515");c("Style").set(this.element,"outline","3px solid #047515")}};c("mixInEventEmitter")(i,{visible:true,hidden:true,full_view:true,viewability:true,viewport_viewability:true,viewability_debug:true});f.exports=i}),null);
__d("ViewabilityDebugLogger",["Banzai","Map","ViewableImpressionTracker","VisibilityState","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({top_enter_viewport:null,top_exit_viewport:null,bottom_enter_viewport:null,bottom_exit_viewport:null});i.logFromViewableImpressionTracker=function(j){var k=new i();k.subscribeToTrackerEvents(j)};function i(){this.$ViewabilityDebugLogger1=new(c("Map"))();this.$ViewabilityDebugLogger2=new(c("Map"))();this.$ViewabilityDebugLogger3=new(c("Map"))()}i.prototype.subscribeToTrackerEvents=function(j){j.addListener("viewability_debug",this.onView.bind(this));j.addListener("hidden",this.onHidden.bind(this))};i.prototype.onView=function(event){var j=event.id,k=event.visibleState,l=Date.now(),m=this.$ViewabilityDebugLogger1.get(j),n=this.$ViewabilityDebugLogger2.get(j);switch(k){case c("VisibilityState").TOP:if(!this.$ViewabilityDebugLogger1.has(j))this.$ViewabilityDebugLogger4(event,l,c("VisibilityState").TOP);if(n){var o={token:n.token,start_ts:n.start_ts,event_type:h.bottom_exit_viewport,event_time:l};this.$ViewabilityDebugLogger5(o,j,c("VisibilityState").BOTTOM)}break;case c("VisibilityState").FULL:if(!this.$ViewabilityDebugLogger3.has(j))this.$ViewabilityDebugLogger4(event,l,c("VisibilityState").FULL);break;case c("VisibilityState").BOTTOM:if(!this.$ViewabilityDebugLogger2.has(j))this.$ViewabilityDebugLogger4(event,l,c("VisibilityState").BOTTOM);if(m){var p={token:m.token,start_ts:m.start_ts,event_type:h.top_exit_viewport,event_time:l};this.$ViewabilityDebugLogger5(p,j,c("VisibilityState").TOP)}break;case c("VisibilityState").NULL:if(m){var q={token:m.token,start_ts:m.start_ts,event_type:h.top_exit_viewport,event_time:l};this.$ViewabilityDebugLogger5(q,j,c("VisibilityState").TOP)}if(n){var r={token:n.token,start_ts:n.start_ts,event_type:h.bottom_exit_viewport,event_time:l};this.$ViewabilityDebugLogger5(r,j,c("VisibilityState").BOTTOM)}}};i.prototype.onHidden=function(event){var j=event.id,k=Date.now(),l=this.$ViewabilityDebugLogger1.get(j),m=this.$ViewabilityDebugLogger2.get(j);if(l){var n={token:l.token,start_ts:l.start_ts,event_type:h.top_exit_viewport,event_time:k};this.$ViewabilityDebugLogger5(n,j,c("VisibilityState").TOP)}if(m){var o={token:m.token,start_ts:m.start_ts,event_type:h.bottom_exit_viewport,event_time:k};this.$ViewabilityDebugLogger5(o,j,c("VisibilityState").BOTTOM)}};i.prototype.$ViewabilityDebugLogger4=function(event,j,k){var l={token:event.token,start_ts:j,event_time:j};switch(k){case c("VisibilityState").TOP:l.event_type=h.top_enter_viewport;this.$ViewabilityDebugLogger1.set(event.id,l);this.$ViewabilityDebugLogger6(l);break;case c("VisibilityState").BOTTOM:l.event_type=h.bottom_enter_viewport;this.$ViewabilityDebugLogger2.set(event.id,l);this.$ViewabilityDebugLogger6(l);break;case c("VisibilityState").FULL:this.$ViewabilityDebugLogger3.set(event.id,l);if(!this.$ViewabilityDebugLogger1.has(event.id)){var m={token:l.token,start_ts:j,event_time:j,event_type:h.top_enter_viewport};this.$ViewabilityDebugLogger1.set(event.id,m);this.$ViewabilityDebugLogger6(m)}if(!this.$ViewabilityDebugLogger2.has(event.id)){var n={token:l.token,start_ts:j,event_time:j,event_type:h.bottom_enter_viewport};this.$ViewabilityDebugLogger2.set(event.id,n);this.$ViewabilityDebugLogger6(n)}break}};i.prototype.$ViewabilityDebugLogger6=function(j){c("Banzai").post("xtrackable:viewability_debug",j)};i.prototype.$ViewabilityDebugLogger5=function(j,k,l){c("Banzai").post("xtrackable:viewability_debug",j);switch(l){case c("VisibilityState").BOTTOM:this.$ViewabilityDebugLogger2["delete"](k);break;case c("VisibilityState").TOP:this.$ViewabilityDebugLogger1["delete"](k);break}this.$ViewabilityDebugLogger3["delete"](k)};f.exports=i}),null);
__d("VisibilityUnitType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FEED_UNIT:"feed_unit",VIEWPORT:"viewport"})}),null);
__d("ViewabilityDurationSegmentLogger",["Banzai","Map","PercentVisible","ViewableImpressionTracker","VisibilityUnitType"],(function a(b,c,d,e,f,g){"use strict";var h=8e3;i.logFromViewableImpressionTracker=function(j){var k=new i();k.subscribeToTrackerEvents(j)};function i(){this.$ViewabilityDurationSegmentLogger1=new(c("Map"))();this.$ViewabilityDurationSegmentLogger2=new(c("Map"))();this.$ViewabilityDurationSegmentLogger3=new(c("Map"))();this.$ViewabilityDurationSegmentLogger4=new(c("Map"))();this.$ViewabilityDurationSegmentLogger5=new(c("Map"))()}i.prototype.subscribeToTrackerEvents=function(j){j.addListener("viewability",this.onViewable.bind(this));j.addListener("viewport_viewability",this.onViewport.bind(this));j.addListener("hidden",this.onHidden.bind(this))};i.prototype.onViewable=function(event){var j=event.id,k=event.percentVisible,l=Date.now(),m=void 0,n=void 0;switch(k){case c("PercentVisible").VISIBLE_0_PCT:m=this.$ViewabilityDurationSegmentLogger1.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_0_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger2.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}m=this.$ViewabilityDurationSegmentLogger4.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}break;case c("PercentVisible").VISIBLE_50_PCT:m=this.$ViewabilityDurationSegmentLogger1.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_0_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger2.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_50_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger4.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}break;case c("PercentVisible").VISIBLE_100_PCT:m=this.$ViewabilityDurationSegmentLogger1.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_0_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger2.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_50_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger4.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_100_PCT,l,c("VisibilityUnitType").FEED_UNIT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);break}};i.prototype.onViewport=function(event){var j=event.id,k=event.percentVisible,l=Date.now(),m=void 0,n=void 0;switch(k){case c("PercentVisible").VISIBLE_0_PCT:m=this.$ViewabilityDurationSegmentLogger3.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}m=this.$ViewabilityDurationSegmentLogger5.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}break;case c("PercentVisible").VISIBLE_50_PCT:m=this.$ViewabilityDurationSegmentLogger3.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_50_PCT,l,c("VisibilityUnitType").VIEWPORT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger5.get(j);if(m){n=this.$ViewabilityDurationSegmentLogger8(m,j,l,true);this.$ViewabilityDurationSegmentLogger9(n,j)}break;case c("PercentVisible").VISIBLE_100_PCT:m=this.$ViewabilityDurationSegmentLogger3.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_50_PCT,l,c("VisibilityUnitType").VIEWPORT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);m=this.$ViewabilityDurationSegmentLogger5.get(j);if(!m)this.$ViewabilityDurationSegmentLogger6(event,c("PercentVisible").VISIBLE_100_PCT,l,c("VisibilityUnitType").VIEWPORT);else this.$ViewabilityDurationSegmentLogger7(m,j,l);break}};i.prototype.onHidden=function(event){var j=event.id,k=Date.now(),l=this.$ViewabilityDurationSegmentLogger1.get(j),m=this.$ViewabilityDurationSegmentLogger2.get(j),n=this.$ViewabilityDurationSegmentLogger3.get(j),o=this.$ViewabilityDurationSegmentLogger4.get(j),p=this.$ViewabilityDurationSegmentLogger5.get(j);if(l)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(l,j,k,true),j);if(m)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(m,j,k,true),j);if(n)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(n,j,k,true),j);if(o)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(o,j,k,true),j);if(p)this.$ViewabilityDurationSegmentLogger9(this.$ViewabilityDurationSegmentLogger8(p,j,k,true),j)};i.prototype.$ViewabilityDurationSegmentLogger6=function(event,j,k,l){var m={token:event.token,startedTrackingTS:k,percentVisible:j,visibilityUnit:l,intervalMs:0,cumulativeMs:0,segmentIdx:0};switch(j){case c("PercentVisible").VISIBLE_0_PCT:this.$ViewabilityDurationSegmentLogger1.set(event.id,m);break;case c("PercentVisible").VISIBLE_50_PCT:if(l===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger2.set(event.id,m);else this.$ViewabilityDurationSegmentLogger3.set(event.id,m);break;case c("PercentVisible").VISIBLE_100_PCT:if(l===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger4.set(event.id,m);else this.$ViewabilityDurationSegmentLogger5.set(event.id,m);break}};i.prototype.$ViewabilityDurationSegmentLogger8=function(j,k,l,m){var n=l-j.startedTrackingTS,o=n-j.cumulativeMs,p=j.percentVisible,q={token:j.token,startedTrackingTS:j.startedTrackingTS,percentVisible:p,visibilityUnit:j.visibilityUnit,intervalMs:o,cumulativeMs:n,segmentIdx:++j.segmentIdx};if(m)q.duration=n;switch(p){case c("PercentVisible").VISIBLE_0_PCT:this.$ViewabilityDurationSegmentLogger1.set(k,q);break;case c("PercentVisible").VISIBLE_50_PCT:if(j.visibilityUnit===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger2.set(k,q);else this.$ViewabilityDurationSegmentLogger3.set(k,q);break;case c("PercentVisible").VISIBLE_100_PCT:if(j.visibilityUnit===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger4.set(k,q);else this.$ViewabilityDurationSegmentLogger5.set(k,q);break}return q};i.prototype.$ViewabilityDurationSegmentLogger7=function(j,k,l){var m=j.intervalMs,n=l-j.startedTrackingTS-j.cumulativeMs;if(this.$ViewabilityDurationSegmentLogger10(m,n)){var o=this.$ViewabilityDurationSegmentLogger8(j,k,l,false);c("Banzai").post("xtrackable:viewability",o,c("Banzai").VITAL)}};i.prototype.$ViewabilityDurationSegmentLogger10=function(j,k){if(j>=h)return false;if(j==0)return true;if(j<1e3)return k>=1e3;var l=0;l=j/1e3;var m=k/1e3;return m>=2*l};i.prototype.$ViewabilityDurationSegmentLogger9=function(j,k){var l=j.percentVisible;switch(l){case c("PercentVisible").VISIBLE_0_PCT:this.$ViewabilityDurationSegmentLogger1["delete"](k);break;case c("PercentVisible").VISIBLE_50_PCT:if(j.visibilityUnit===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger2["delete"](k);else this.$ViewabilityDurationSegmentLogger3["delete"](k);break;case c("PercentVisible").VISIBLE_100_PCT:if(j.visibilityUnit===c("VisibilityUnitType").FEED_UNIT)this.$ViewabilityDurationSegmentLogger4["delete"](k);else this.$ViewabilityDurationSegmentLogger5["delete"](k);break}c("Banzai").post("xtrackable:viewability",j,c("Banzai").VITAL)};f.exports=i}),null);
__d("ViewableImpressionDurationLogger",["Banzai","Map"],(function a(b,c,d,e,f,g){"use strict";h.logFromViewableImpressionTracker=function(i){var j=new h();j.subscribeToTrackerEvents(i)};function h(){this.$ViewableImpressionDurationLogger1=new(c("Map"))()}h.prototype.subscribeToTrackerEvents=function(i){i.addListener("visible",this.onElementVisible.bind(this));i.addListener("hidden",this.onElementHidden.bind(this))};h.prototype.onElementVisible=function(event){if(this.$ViewableImpressionDurationLogger1.get(event.id))return null;var i={token:event.token,startedTrackingTS:this.getTimeNow()};this.$ViewableImpressionDurationLogger1.set(event.id,i);return i};h.prototype.onElementHidden=function(event){var i=this.$ViewableImpressionDurationLogger1.get(event.id);if(!i)return false;i.trackingDuration=this.getTimeNow()-i.startedTrackingTS;return this.sendLog(event.id)};h.prototype.sendLog=function(i){var j=this.$ViewableImpressionDurationLogger1.get(i);if(!j||!j.trackingDuration)return false;c("Banzai").post("xtrackable:duration",j);this.$ViewableImpressionDurationLogger1["delete"](i);return true};h.prototype.getTimeNow=function(){return parseFloat((Date.now()/1e3).toFixed(2))};f.exports=h}),null);
__d("ViewableImpressionHeatmapLogger",["Banzai"],(function a(b,c,d,e,f,g){h.logFromViewableImpressionTracker=function(i,j){"use strict";var k=new h(j);k.subscribeToTrackerEvents(i)};function h(i){"use strict";this.loggingDurationMS=i;this.trackingEntries={}}h.prototype.subscribeToTrackerEvents=function(i){"use strict";this.visibleSubscription=i.addListener("visible",this.onElementVisible,this);this.hiddenSubscription=i.addListener("hidden",this.onElementHidden,this)};h.prototype.onElementVisible=function(i){"use strict";var j=this.getCurrentTimestamp(),k=this.trackingEntries[i.id];if(!k){k=this.createTrackingEntry(i);this.beginTracking(i.id,k);j=k.startedTrackingTS}k.viewportProgressEvents.push({timestamp:j,percentInViewport:i.percentInViewport.toFixed(2)})};h.prototype.onElementHidden=function(i){"use strict";var j=this.getCurrentTimestamp(),k=this.trackingEntries[i.id];if(!k)return;k.viewportProgressEvents.push({timestamp:j,percentInViewport:0})};h.prototype.onTrackingCompleted=function(i){"use strict";var j=this.trackingEntries[i];j.viewportProgressEvents.push({timestamp:this.getCurrentTimestamp(),percentInViewport:j.tracker.getPercentInViewport().toFixed(2)});if(this.$ViewableImpressionHeatmapLogger1())this.$ViewableImpressionHeatmapLogger2(i,j);this.logToServer(j);delete this.trackingEntries[i]};h.prototype.logToServer=function(i){"use strict";var j=i;delete j.tracker;c("Banzai").post("xtrackable:heatmap",j)};h.prototype.beginTracking=function(i,j){"use strict";this.trackingEntries[i]=j;setTimeout(function(){return this.onTrackingCompleted(i)}.bind(this),this.loggingDurationMS)};h.prototype.createTrackingEntry=function(i){"use strict";return{tracker:i.tracker,token:i.token,startedTrackingTS:this.getCurrentTimestamp(),viewportProgressEvents:[]}};h.prototype.getCurrentTimestamp=function(){"use strict";return(Date.now()/1e3).toFixed(2)};h.prototype.$ViewableImpressionHeatmapLogger1=function(){"use strict";return 0};h.prototype.$ViewableImpressionHeatmapLogger2=function(i,j){"use strict";var k="Completed tracking for id "+i+" token="+j.token+" startedTrackingTS="+j.startedTrackingTS+"\n";j.viewportProgressEvents.forEach(function(l){k+="% in view: "+l.percentInViewport+" timestamp="+l.timestamp+"\n"})};f.exports=h}),null);
__d("VisibilityTracking",["Banzai","BrowseClientEventLogger","DataAttributeUtils","ErrorUtils","ScriptPath","SubscriptionsHandler","Visibility","VisibilityTrackingHelper","collectDataAttributes","getElementPosition","pageID","throttle"],(function a(b,c,d,e,f,g){var h="visibility_tracking",i="[data-vistracking]",j=500,k=50,l=50,m=50,n=50,o=0;function p(q){"use strict";q=q||{};if(!q.bypass_banzai_check&&!c("Banzai").isEnabled(h))return;this.visibleElementInfo={};this.getDataFromConfig(q);c("Visibility").addListener(c("Visibility").VISIBLE,c("ErrorUtils").guard(function(){return this.fireEvent("browser")}.bind(this),"VisibilityTracking:visible",this));c("Visibility").addListener(c("Visibility").HIDDEN,c("ErrorUtils").guard(function(){return this.clearAllVisibleElements("browser")}.bind(this),"VisibilityTracking:hidden",this));c("ScriptPath").subscribe(c("ErrorUtils").guard(function(){return this.updateVisibleElements()}.bind(this),"VisibilityTracking:scriptPath",this));c("Banzai").subscribe(c("Banzai").SHUTDOWN,c("ErrorUtils").guard(function(){return this.onUnload()}.bind(this),"VisibilityTracking:banzaiShutdown",this));this.fireEventCallback=c("throttle").acrossTransitions(c("ErrorUtils").guard(function(event){return this.fireEvent(event)}.bind(this),"VisibilityTracking:fireEventCallback",this),this.timeout,this);this.listeners=new(c("SubscriptionsHandler"))();c("VisibilityTrackingHelper").getEventListeners(function(){return this.fireEventCallback()}.bind(this)).forEach(function(r){this.listeners.addSubscriptions(r)},this);if(this.extraInit)c("ErrorUtils").applyWithGuard(this.extraInit.bind(this))}p.prototype.getDataFromConfig=function(q){"use strict";this.config=q;this.root=q.root||document.documentElement;this.selector=q.selector||i;this.timeout=q.timeout!==undefined?q.timeout:j;this.minOffsetVisibleFromBottom=q.minOffsetVisibleFromBottom!==undefined?q.minOffsetVisibleFromBottom:k;this.minOffsetVisibleFromTop=q.minOffsetVisibleFromTop!==undefined?q.minOffsetVisibleFromTop:l;this.minOffsetVisibleFromLeft=q.minOffsetVisibleFromLeft!==undefined?q.minOffsetVisibleFromLeft:m;this.minOffsetVisibleFromRight=q.minOffsetVisibleFromRight!==undefined?q.minOffsetVisibleFromRight:n;this.handleAllHiddenEvents=q.handleAllHiddenEvents!==undefined?q.handleAllHiddenEvents:false;this.handleAllVisibleEvents=q.handleAllVisibleEvents!==undefined?q.handleAllVisibleEvents:false;this.cacheTrackedElements=q.cacheTrackedElements!==undefined?q.cacheTrackedElements:false};p.prototype.getAllTrackedElements=function(){"use strict";if(!this.allTrackedElements){this.allTrackedElements={};var q=[];if(this.config.is_xtrackable)q=c("DataAttributeUtils").getXTrackableElements();else if(this.root&&this.root.querySelectorAll)q=this.root.querySelectorAll(this.selector);for(var r=0;r<q.length;r++){var s=this.getElementID(q[r]);this.allTrackedElements[s.toString()]=q[r]}}return this.allTrackedElements};p.prototype.refreshAllTrackedElements=function(){"use strict";delete this.allTrackedElements;return this.getAllTrackedElements()};p.prototype.getDataToLog=function(q){"use strict";var r=Object.assign(c("collectDataAttributes")(q,["gt"]).gt,{client_time:Date.now()/1e3,time_spent_id:c("pageID"),script_path:c("ScriptPath").getScriptPath()});return r};p.prototype.getElementID=function(q){"use strict";var r=q.$VisibilityTracking1;if(r)return r;q.$VisibilityTracking1=++o;return o};p.prototype.sendDataToLog=function(q){"use strict";c("BrowseClientEventLogger").maybeLogVisiblityEvent(q);c("Banzai").post(h,q)};p.prototype.isInstreamAdStoryElement=function(q){"use strict";return false};p.prototype.fireEvent=function(){var q=arguments.length<=0||arguments[0]===undefined?"default":arguments[0];"use strict";var r=this.cacheTrackedElements?this.allTrackedElements:this.refreshAllTrackedElements();for(var s in r){var t=r[s],u=c("VisibilityTrackingHelper").getViewportInfo(),v=this.isVisible(t,u);if(!v&&(s in this.visibleElementInfo||this.handleAllHiddenEvents))this.handleEvent(t,{name:"hidden",cause:q});else if(v&&(!(s in this.visibleElementInfo)||this.handleAllVisibleEvents))this.handleEvent(t,{name:"visible",cause:q})}this.clearUntrackedVisibleElements()};p.prototype.isVisible=function(q,r){"use strict";if(q==null)return false;var s=c("getElementPosition")(q);return s.y+s.height>=this.minOffsetVisibleFromTop&&s.y<=r.height-this.minOffsetVisibleFromBottom&&s.x+s.width>=this.minOffsetVisibleFromLeft&&s.x<=r.width-this.minOffsetVisibleFromRight};p.prototype.handleEvent=function(q,event){"use strict";var r=this.getElementID(q).toString(),s=this.getDataToLog(q),t=void 0;if(event.name==="visible"){var u=Math.floor(Date.now()/1e3);t=c("pageID").concat(":",u.toString(),":",this.getElementID(q).toString());this.visibleElementInfo[r]={visibility_id:t,elem:q}}else if(event.name==="hidden"){if(r in this.visibleElementInfo){t=this.visibleElementInfo[r].visibility_id;delete this.visibleElementInfo[r]}if(event.cause==="browser")return}this.sendDataToLog(Object.assign(s,{event:event.name,visibility_id:t}))};p.prototype.clearUntrackedVisibleElements=function(){"use strict";var q=this.getAllTrackedElements();for(var r in this.visibleElementInfo)if(!(r in q)){var s=this.visibleElementInfo[r];if(s.elem)this.handleEvent(s.elem,{name:"hidden",cause:"removed"})}};p.prototype.clearAllVisibleElements=function(){var q=arguments.length<=0||arguments[0]===undefined?"default":arguments[0];"use strict";var r=this.getAllTrackedElements();for(var s in r)if(s in this.visibleElementInfo)this.handleEvent(r[s],{name:"hidden",cause:q});this.clearUntrackedVisibleElements()};p.prototype.updateVisibleElements=function(){"use strict";this.clearAllVisibleElements();this.fireEvent()};p.prototype.refreshAndFireEvent=function(event){"use strict";this.refreshAllTrackedElements();this.fireEventCallback(event)};p.prototype.onUnload=function(){"use strict";this.clearAllVisibleElements();if(this.listeners){this.listeners.release();this.listeners=null}if(this.extraCleanup)c("ErrorUtils").applyWithGuard(this.extraCleanup.bind(this))};p.init=function(q){"use strict";return new p(q)};f.exports=p}),null);
__d("ViewableImpressionEventHandler",["DataAttributeUtils","FullViewLogger","ViewabilityDebugLogger","ViewabilityDurationSegmentLogger","ViewableImpressionDurationLogger","ViewableImpressionHeatmapLogger","ViewableImpressionTracker","VisibilityTracking"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=1;h=babelHelpers.inherits(k,c("VisibilityTracking"));i=h&&h.prototype;k.prototype.extraInit=function(){this.impressionTrackers={}};k.prototype.getDataFromConfig=function(l){i.getDataFromConfig.call(this,l);this.doHeatmapLogging=l.doHeatmapLogging;this.heatmapLoggingDurationMS=l.heatmapLoggingDurationMS;l.impressionURL=l.impressionURL!==undefined?l.impressionURL:"/xti.php";l.nonviewableEnabled=l.nonviewableEnabled!==undefined?l.nonviewableEnabled:false};k.prototype.getImpressionTracking=function(l){var m=this.getElementID(l),n=this.impressionTrackers[m];if(!n){var o=babelHelpers["extends"]({},this.getConfigFromElement(l),this.config);n=new(c("ViewableImpressionTracker"))(m,l,o);this.impressionTrackers[m]=n;if(o.log_impression_duration)c("ViewableImpressionDurationLogger").logFromViewableImpressionTracker(n);if(this.doHeatmapLogging)c("ViewableImpressionHeatmapLogger").logFromViewableImpressionTracker(n,this.heatmapLoggingDurationMS);if(o.should_log_full_views)c("FullViewLogger").logFromViewableImpressionTracker(n);if(o.should_log_viewability_duration)c("ViewabilityDurationSegmentLogger").logFromViewableImpressionTracker(n);if(o.should_log_debug_duration)c("ViewabilityDebugLogger").logFromViewableImpressionTracker(n)}return n};k.prototype.handleEvent=function(l,event){var m=this.getImpressionTracking(l);if(!m)return;if(event.name==="visible"){m.onVisible(event);if(!this.visibleElementInfo[m.getID()])this.visibleElementInfo[m.getID()]={elem:l}}else if(event.name==="hidden"){var n=m.getConfig();if(event.cause==="default"||n.log_visibility_hidden_when_browser_inactive&&event.cause==="browser"){m.onHidden();delete this.visibleElementInfo[m.getID()]}else if(event.cause==="removed"){m.onRemoved();delete this.visibleElementInfo[m.getID()];delete this.impressionTrackers[m.getID()]}}};k.prototype.isInstreamAdStoryElement=function(l){var m=babelHelpers["extends"]({},this.getConfigFromElement(l),this.config);return!!m.is_instream_story};k.prototype.getConfigFromElement=function(l){return JSON.parse(c("DataAttributeUtils").getDataAttribute(l,"data-xt-vimp"))};k.prototype.getElementID=function(l){if(!l.getAttribute("id"))l.setAttribute("id","xt_uniq_"+j++);return l.getAttribute("id")};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("ViewableImpressionTracking",["Arbiter","DesktopHscrollUnitEventConstants","ErrorUtils","LitestandMessages","Run","ViewableImpressionEventHandler","ViewableImpressionConfig"],(function a(b,c,d,e,f,g){var h={init:function i(){if(c("ViewableImpressionEventHandler").instance===undefined){c("ViewableImpressionEventHandler").instance=new(c("ViewableImpressionEventHandler"))(c("ViewableImpressionConfig"));c("ViewableImpressionEventHandler").instance.listeners.addSubscriptions(c("Arbiter").subscribe([c("LitestandMessages").STORIES_INSERTED,"AdsRefreshHandler/AdsLoaded","MPPInsights/ChartView","PhotoSnowliftAds/displayUnits","WebMessengerAdsControl/adjustAds",c("DesktopHscrollUnitEventConstants").HSCROLL_ITEM_INSERTED_EVENT,"WebVideoChannelAds/AdsLoaded"],c("ErrorUtils").guard(function(event){c("ViewableImpressionEventHandler").instance.refreshAndFireEvent(event)},"ViewableImpressionTracking")))}c("Run").onLoad(function(){c("ViewableImpressionEventHandler").instance.refreshAndFireEvent()})}};f.exports=h}),null);
__d("getInlineBoundingRect",["Rect"],(function a(b,c,d,e,f,g){function h(i,j){var k=i.getClientRects();if(!j||k.length===0)return c("Rect").getElementBounds(i);var l,m=false;for(var n=0;n<k.length;n++){var o=new(c("Rect"))(Math.round(k[n].top),Math.round(k[n].right),Math.round(k[n].bottom),Math.round(k[n].left),"viewport").convertTo("document"),p=o.getPositionVector(),q=p.add(o.getDimensionVector());if(!l||p.x<=l.l&&p.y>l.t){if(m)break;l=new(c("Rect"))(p.y,q.x,q.y,p.x,"document")}else{l.t=Math.min(l.t,p.y);l.b=Math.max(l.b,q.y);l.r=q.x}if(o.contains(j))m=true}if(!l)l=c("Rect").getElementBounds(i);return l}f.exports=h}),null);
__d("nl2br",["DOM"],(function a(b,c,d,e,f,g){var h=/(\r\n|[\r\n])/;function i(j){return j.split(h).map(function(k){return h.test(k)?c("DOM").create("br"):k})}f.exports=i}),null);
__d("Tooltip",["fbt","AsyncRequest","ContextualLayer","ContextualLayerAutoFlip","CSS","DOM","Event","Style","TooltipData","Vector","emptyFunction","getElementText","getInlineBoundingRect","getOrCreateDOMID","nl2br","setImmediate"],(function a(b,c,d,e,f,g,h){var i=null,j=null,k=null,l=null,m=null,n=null,o=[],p=[];function q(){if(!l){m=c("DOM").create("div",{className:"tooltipContent","data-testid":"tooltip_testid"});n=c("getOrCreateDOMID")(m);var u=c("DOM").create("i",{className:"arrow"}),v=c("DOM").create("div",{className:"uiTooltipX"},[m,u]);l=new(c("ContextualLayer"))({},v);l.shouldSetARIAProperties(false);l.enableBehavior(c("ContextualLayerAutoFlip"))}}function r(u,v){t._show(u,h._("Loading..."));new(c("AsyncRequest"))(v).setHandler(function(w){t._show(u,w.getPayload())}).setErrorHandler(c("emptyFunction")).send()}var s;c("Event").listen(document.documentElement,"mouseover",function(event){s=event;c("setImmediate")(function(){s=null})});var t=babelHelpers["extends"]({},c("TooltipData"),{isActive:function u(v){return v===i},process:function u(v,w){if(!c("DOM").contains(v,w))return;if(v!==i){t.fetchIfNecessary(v);var x=t._get(v);if(x.suppress)return;if(x.delay)t._showWithDelay(v,x.delay);else t.show(v)}},fetchIfNecessary:function u(v){var w=v.getAttribute("data-tooltip-uri");if(w){v.removeAttribute("data-tooltip-uri");r(v,w)}},hide:function u(){if(i){l.hide();i=null;while(o.length)o.pop().remove()}},_show:function u(v,w){t._store({context:v,content:w});t.isActive(v)&&t.show(v)},show:function u(v){var w=function w(){v.setAttribute("aria-describedby",n);l.show()},x=function x(){v.removeAttribute("aria-describedby");t.hide()},y=function y(H){if(!c("DOM").contains(i,H.getTarget()))x()};q();x();var z=t._get(v);if(z.suppress||t.allSuppressed)return;var A=z.content;if(z.overflowDisplay){if(v.offsetWidth>=v.scrollWidth)return;if(!A)A=c("getElementText")(v)}if(!A)return;var B=0,C=0;if(z.position==="left"||z.position==="right")C=(v.offsetHeight-28)/2;else if(z.alignH!=="center"){var D=v.offsetWidth;if(D<32)B=(D-32)/2*(z.alignH==="right"?-1:1)}l.setContextWithBounds(v,c("getInlineBoundingRect")(v,s&&c("Vector").getEventPosition(s))).setOffsetX(B).setOffsetY(C).setPosition(z.position).setAlignment(z.alignH);if(typeof A==="string"){c("CSS").addClass(l.getRoot(),"invisible_elem");var E=c("DOM").create("span",{},c("nl2br")(A)),F=c("DOM").create("div",{className:"tooltipText"},E);c("DOM").setContent(m,F);w();c("CSS").removeClass(l.getRoot(),"invisible_elem")}else{c("DOM").setContent(m,A);w()}o.push(c("Event").listen(document.documentElement,"mouseover",y),c("Event").listen(document.documentElement,"focusin",y));var G=c("Style").getScrollParent(v);if(G!==window)o.push(c("Event").listen(G,"scroll",x));if(!z.persistOnClick)o.push(c("Event").listen(v,"click",x));i=v},_showWithDelay:function u(v,w){if(v!==j)t._clearDelay();if(!k){var x=function x(y){if(!c("DOM").contains(j,y.getTarget()))t._clearDelay()};p.push(c("Event").listen(document.documentElement,"mouseover",x),c("Event").listen(document.documentElement,"focusin",x));j=v;k=setTimeout(function(){t._clearDelay();t.show(v)},w)}},_clearDelay:function u(){clearTimeout(k);j=null;k=null;while(p.length)p.pop().remove()}});c("Event").listen(window,"scroll",t.hide);f.exports=t}),null);
__d("PluginTabLoadMore",["CSS","Event"],(function a(b,c,d,e,f,g){"use strict";var h={noMoreContent:function i(){c("Event").fire(this.root,"noMoreContent");c("CSS").hide(this.spinner)},setCursor:function i(j){c("Event").fire(this.root,"setCursor",j)},init:function i(j,k){this.root=j;this.spinner=k}};f.exports=h}),null);